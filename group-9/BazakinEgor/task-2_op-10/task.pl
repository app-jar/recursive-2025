% Номер 2 Задача 10
% Является ли матрица нижнетреугольной

% Проверка нижней треугольной матрицы
is_lower_triangular([]) :- !.  % Пустая матрица считается треугольной
is_lower_triangular(Matrix) :-
    is_list(Matrix),           % Проверяем, что это список
    maplist(is_list, Matrix),  % Проверяем, что все элементы - списки (строки)
    Matrix = [FirstRow|_],     % Берем первую строку
    maplist(same_length(FirstRow), Matrix),  % Проверяем, что все строки одинаковой длины
    check_lower(Matrix, 0).    % Проверяем нижнюю треугольность

% Рекурсивно проверяем все строки матрицы
check_lower([], _).            % База: все строки проверены
check_lower([Row|Rows], I) :-
    check_row(Row, I, 0),      % Проверяем текущую строку
    I1 is I + 1,               % Увеличиваем индекс строки
    check_lower(Rows, I1).     % Рекурсия для остальных строк

% Проверяем элементы строки: выше диагонали должны быть нули
check_row([], _, _).           % База: все элементы проверены
check_row([Elem|Elems], I, J) :-
    (J > I -> Elem =:= 0 ; true),  % Если элемент выше диагонали, должен быть 0
    J1 is J + 1,               % Увеличиваем индекс столбца
    check_row(Elems, I, J1).   % Рекурсия для остальных элементов
