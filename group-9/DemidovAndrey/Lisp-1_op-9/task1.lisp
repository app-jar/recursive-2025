(defun take-first-n-safe (series n)
  "Безопасно возвращает первые N элементов ряда"
  (cond
    ;; Проверка 1: series должен быть списком
    ((not (listp series)) (error "Первый аргумент должен быть списком"))
    
    ;; Проверка 2: n должен быть целым числом
    ((not (integerp n)) (error "Второй аргумент должен быть числом"))
    
    ;; Проверка 3: n не может быть отрицательным
    ((< n 0) (error "N не может быть отрицательным"))
    
    ;; Если все проверки пройдены, возвращаем результат
    (t (let ((length (length series)))  ; Вычисляем длину списка
         ;; Сравниваем n с длиной списка
         (if (>= n length)
             ;; Если запрашиваем больше элементов, чем есть в списке,
             ;; возвращаем весь список без изменений
             series
             ;; Иначе возвращаем первые n элементов
             (subseq series 0 n))))))

;; Тестируем функцию: берем первые 3 элемента из списка (13 123 232 3254)
(print (take-first-n-safe '(13 123 232 3254) 3))
;; Результат: (13 123 232)
