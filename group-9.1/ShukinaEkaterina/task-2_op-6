%  Номер 2 Задача 6. Определить максимальное количество дочерних узлов в дереве.

% Базовый случай: пустое дерево имеет 0 дочерних узлов
max_children(nil, 0).

% Случай для узла с несколькими детьми
max_children(tree(Value, Children), Max) :-
    % Вычисляем количество детей текущего узла
    length(Children, ChildCount),
    
    % Рекурсивно находим максимальное количество детей для каждого ребенка
    max_children_list(Children, MaxInChildren),
    
    % Находим максимум между количеством детей текущего узла и максимумом в детях
    max(ChildCount, MaxInChildren, Max).

% Вспомогательный предикат для списка деревьев
max_children_list([], 0).
max_children_list([Child|Rest], Max) :-
    max_children(Child, MaxChild),
    max_children_list(Rest, MaxRest),
    max(MaxChild, MaxRest, Max).

% Предикат для нахождения максимума из двух чисел
max(A, B, A) :- A >= B.
max(A, B, B) :- A < B.

% Примеры использования:

% Пример 1: Простое дерево
% tree1 имеет 2 ребенка, его дети не имеют своих детей
% tree1(корень, [ребенок1, ребенок2])
example_tree1(tree(a, [tree(b, []), tree(c, [])])).

% Пример 2: Более сложное дерево
% Корень имеет 3 ребенка, у одного из детей есть 2 своих ребенка
example_tree2(tree(a, [
    tree(b, []),
    tree(c, [
        tree(d, []),
        tree(e, [])
    ]),
    tree(f, [])
])).

% Пример 3: Дерево, где не корень имеет максимальное количество детей
example_tree3(tree(a, [
    tree(b, [
        tree(c, []),
        tree(d, []),
        tree(e, [])  % b имеет 3 детей
    ]),
    tree(f, [])  % a имеет только 2 детей
])).
